@model IEnumerable<LTWEB_NhanVien.Models.tbl_Employee>
@{
    ViewBag.Title = "Quản lý Nhân viên";
    Layout = "~/Views/Shared/_Layout.cshtml";


    var departments = ViewBag.Departments as List<LTWEB_NhanVien.Models.tbl_Deparment>;
    int selectedDeptId = ViewBag.SelectedDeptId ?? 0;
}

<style>
 
    .department-sidebar {
        background-color: #f8f9fa;
        padding: 15px;
        border-right: 1px solid #dee2e6;
        height: 100vh;
    }

        .department-sidebar .nav-link {
            color: #007bff;
            padding: 8px 12px;
            margin-bottom: 5px;
            border-radius: 4px;
            display: block;
        }

            .department-sidebar .nav-link.active,
            .department-sidebar .nav-link:hover {
                background-color: #007bff;
                color: white;
                text-decoration: none;
            }

    .employee-image {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        object-fit: cover;
    }

    .table th, .table td {
        vertical-align: middle !important;
    }
</style>

<div class="row">
    <div class="col-md-3 department-sidebar">
        <h4>DANH SÁCH PHÒNG BAN</h4>
        <ul class="nav flex-column">
            <li class="nav-item">
                <a class="nav-link @(selectedDeptId == 0 ? "active" : "")"
                   href="@Url.Action("Index", "NhanVien")">
                    Tất cả phòng ban
                </a>
            </li>

            @foreach (var dept in departments)
            {
                <li class="nav-item">
                    <a class="nav-link @(dept.DeptId == selectedDeptId ? "active" : "")"
                       href="@Url.Action("Index", "NhanVien", new { id = dept.DeptId })">
                        @dept.Name
                    </a>
                </li>
            }
        </ul>
    </div>

    <div class="col-md-9">
        <h2>EMPLOYEES LIST</h2>
        <p>
            @Html.ActionLink("Create New", "Create", null, new { @class = "btn btn-primary" })
        </p>
        <table class="table table-hover">
            <tr>
                <th>Mã NV</th>
                <th>Họ và Tên</th>
                <th>Giới Tính</th>
                <th>Thành Phố</th>
                <th>Ảnh</th>
                <th>Phòng ban</th>
                <th></th>
            </tr>

            @foreach (var item in Model)
            {
                <tr>
                    <td>@Html.DisplayFor(modelItem => item.Id)</td>
                    <td>@Html.DisplayFor(modelItem => item.Name)</td>
                    <td>@Html.DisplayFor(modelItem => item.Gender)</td>
                    <td>@Html.DisplayFor(modelItem => item.City)</td>
                    <td>
                        <img src="@Url.Content("~/Images/" + item.Image)" class="employee-image" />
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.tbl_Deparment.Name)
                    </td>
                    <td>
                        @Html.ActionLink("Edit", "Edit", new { id = item.Id }, new { @class = "btn btn-warning btn-xs" })
                        @Html.ActionLink("Details", "Details", new { id = item.Id }, new { @class = "btn btn-info btn-xs" })
                        @Html.ActionLink("Delete", "Delete", new { id = item.Id }, new { @class = "btn btn-danger btn-xs" })
                    </td>
                </tr>
            }
        </table>
    </div>
</div>